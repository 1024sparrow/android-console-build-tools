# android-console-build-tools
console build tools for building android applications.

Осторожно! LINUX-специфичное ПО!	

Перед вами bash-скрипт, который закачивает, распаковывает, как надо расставляет Android-SDK, Android-NDK и всё то, что нужно для сборки.
Практическая реализация рецептов, описанных в [статье](https://www.hanshq.net/command-line-android.html). Не ревлизована сборка с участием NDK - см. статьи [исходную](https://www.hanshq.net/command-line-android.html) и [ещё одну](https://www.hanshq.net/othello.html)
Теперь для создания нового приложения под Андроид или сборки имеющегося вам не нужна AndroidStudio !

# Чего сейчас нет (постановка задачи)

На данный момент данным инструментом не получится собрать следующие приложения для android:

* Проекты с зависимостями, т.е. которые исползуют не только непосредственно Android API, но и какие-либо сторонние библиотеки.
* Проекты с NDK (с использованием кода на C++)

Сейчас необходимо произвести следующие работы:

1. Разобраться с версиями JDK, NDK, предусмотреть сборку нового формата, пришедшему на смену APK - AAB. Сделать возможность сборки под одну версию Android из списка или под все версии Android.
2. Предусмотреть работу с зависимостями (не знаю как в скрипте, а в документашке описать надо)
3. Добавить поддержку NDK

# Системные требования
Система сборки предполагает, что вы используете её на ОС GNU/Linux, что у вас в системе есть ```bash``` и кодировка консоли ```utf-8```(ибо все комментарии на русском языке).

Инструменты сборки будут скачаны скриптом самостоятельно, так что не имеет значение наличие доступа к каким-либо репозиториям. Для работы скрипта установки требуется наличие интернета и 50 ГБ свободного места на вашем жёстком диске (инструменты и образ системы для одной версии Android у меня заняло 4,6 ГБ, так что для ряда версий ожидается в разы больше занятого места). После установки интернет не требуется.

Если есть желание впоследствии обновлять сборочную систему (чтобы с появлением новых версий Android у вас появлялись новые варианты сборки), вам необходимо в системе иметь ```git```.

Для установки данной сборочной системы не требуется рутовых прав

# Инструкция по установке

Выберите директорию для установки, которую вы не будете удалять или куда-либо перемещать. Например, директорию ```opt``` в домашней директории. Установка производится под обычным пользователем.
```bash
$ cd ~/opt # создайте её, если такой у вас нет
$ git clone https://github.com/1024sparrow/android-console-build-tools.git
$ cd android-console-build-tools
$ ./install.sh
```
За пределами выкачанной директории система сборки прописывается только в ```~/.bashrc```. Перед запуском необходимо либо открыть новый терминал, либо перезайти под собой в имеющемся.

# После установки (использование)

## Сборка проекта, созданного ранее с помощью Android Studio

Если у вас уже есть код проекта, то в директории, в которой располагается AndroidManifest.xml , необходимо выполнить скрипт, путь до которого сохранён в переменной окружения $MYANDROID_GEN. Если проект был создан с помощью Android-Studio, то корень исходников проекта, располагается в поддиректории ```app/src/main/```.
```bash
$ cd ...
$ cd app/src/main
$ $MYANDROID_GEN
$ ./build.sh # если во время работы мастера создания собирающего скрипта вы оставили название сборочного скрипта по умолчанию
```

## Создание нового проекта с нуля

Создайте директорию проекта, перейдите в неё, запустите скрипт $MYANDROID_GEN и следуйте указаниям мастера создания нового проекта

```bash
$ mkdir ~/helloAndroid
$ cd ~helloAndroid
$ $MYANDROID_GEN
```

# Запуск приложения на подключенном устройстве

Вам нужен смартфон (или планшет?) с целевой версией Android (или более старшей). 
На этом смартфоне необходимо включить инструменты разработчика (зайдите в "Настройки"/"О телефоне" и нажмите "Build номер" семь раз.). 
Далее вам необходимо в "Настройки"/"Для разработчиков" включить флажок "Отладка по USB". Также рекоммендуется флаг "Оставить включенным" (удобно, что не надо отвлекатся на разблокировку смартфона во время разработки)

На компьютере должны быть установлены инструменты разработчика Android (adb).
В Ubuntu-20.04 ставится так:
```bash
sudo apt install adb
```

После того, как ваше приложение собрано, подключаем устройство к компьютеру и запускаем скрипт **deploy_and_run.sh** - он установит приложение на устройство и запустит его.

## Лицензия

Copyright © 2018-2021 [Васильев Борис](https://github.com/1024sparrow)
Публикуется под лицензией [MIT license](https://github.com/1024sparrow/android-console-build-tools/blob/master/LICENSE).
